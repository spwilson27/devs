{
  "name": "rag",
  "description": "Local RAG MCP server discovery manifest for agents and tooling.",
  "start_command": "./.rag/mcp_server_wrapper.sh",
  "working_dir": ".",
  "transports": ["mcp_stdio"],
  "tools": {
    "query": {
      "signature": "query(question: str, top_k: int=5) -> str",
      "description": "Synthesise an answer grounded in retrieved context from the repo index."
    },
    "retrieve": {
      "signature": "retrieve(question: str, top_k: int=5) -> list[dict]",
      "description": "Return raw retrieved chunks: [{file_path, score, text}, ...]."
    },
    "reindex": {
      "signature": "reindex(sources?: list[str], config_path?: str, blocking?: bool) -> dict",
      "description": "Trigger a rebuild of the vector index. If `sources` is provided it overrides the config file and accepts glob paths."
    }
  },
  "examples": {
    "curl": "(no-http-bridge by default) run the wrapper then use an MCP client to call tools",
    "mcp_client_example": {
      "start": "./.rag/mcp_server_wrapper.sh",
      "call_reindex": {"tool":"reindex", "args":{"sources":["src/**","docs/**"], "blocking":true}}
    }
  },
  "notes": {
    "resource_requirements": "Python native deps required: faiss, torch, llama-index â€” may be heavy to install.",
    "security": "Server runs over stdio by default; prefer local-only usage."
  }
}
